<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_Qo8TcJOiEeugCOaB_8fVqA" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_statecodeItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_transactionnoItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_mercentcodeItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_amountItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_exemptedItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_surchargeItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_rebateItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_penalityItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_interestItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_resultItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="_queryItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_gatewayItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_merchentItem" structureRef="com.nic.paymentgateway.Merchent"/>
  <bpmn2:itemDefinition id="_gatewaystringItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7106845F-C625-417A-A08A-34F51C32BE00_ColumnSeparatorInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7106845F-C625-417A-A08A-34F51C32BE00_MaxResultsInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7106845F-C625-417A-A08A-34F51C32BE00_SQLStatementInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7106845F-C625-417A-A08A-34F51C32BE00_ResultOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__59BF906E-1092-445A-9311-F9D5E68120BA_namespaceInputXItem" structureRef="java.lang.String"/>
  <bpmn2:itemDefinition id="__59BF906E-1092-445A-9311-F9D5E68120BA_modelInputXItem" structureRef="java.lang.String"/>
  <bpmn2:itemDefinition id="__59BF906E-1092-445A-9311-F9D5E68120BA_decisionInputXItem" structureRef="java.lang.String"/>
  <bpmn2:itemDefinition id="__59BF906E-1092-445A-9311-F9D5E68120BA_merchentInputXItem" structureRef="com.nic.paymentgateway.Merchent"/>
  <bpmn2:itemDefinition id="__59BF906E-1092-445A-9311-F9D5E68120BA_merchentOutputXItem" structureRef="com.nic.paymentgateway.Merchent"/>
  <bpmn2:itemDefinition id="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ColumnSeparatorInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_MaxResultsInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_SQLStatementInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ResultOutputXItem" structureRef="String"/>
  <bpmn2:process id="PaymentGateway.paymentprocess" drools:packageName="com.nic.paymentgateway" drools:version="1.0" drools:adHoc="false" name="paymentprocess" isExecutable="true" processType="Public">
    <bpmn2:property id="statecode" itemSubjectRef="_statecodeItem" name="statecode"/>
    <bpmn2:property id="transactionno" itemSubjectRef="_transactionnoItem" name="transactionno"/>
    <bpmn2:property id="mercentcode" itemSubjectRef="_mercentcodeItem" name="mercentcode"/>
    <bpmn2:property id="amount" itemSubjectRef="_amountItem" name="amount"/>
    <bpmn2:property id="exempted" itemSubjectRef="_exemptedItem" name="exempted"/>
    <bpmn2:property id="surcharge" itemSubjectRef="_surchargeItem" name="surcharge"/>
    <bpmn2:property id="rebate" itemSubjectRef="_rebateItem" name="rebate"/>
    <bpmn2:property id="penality" itemSubjectRef="_penalityItem" name="penality"/>
    <bpmn2:property id="interest" itemSubjectRef="_interestItem" name="interest"/>
    <bpmn2:property id="result" itemSubjectRef="_resultItem" name="result"/>
    <bpmn2:property id="query" itemSubjectRef="_queryItem" name="query"/>
    <bpmn2:property id="gateway" itemSubjectRef="_gatewayItem" name="gateway"/>
    <bpmn2:property id="merchent" itemSubjectRef="_merchentItem" name="merchent"/>
    <bpmn2:property id="gatewaystring" itemSubjectRef="_gatewaystringItem" name="gatewaystring"/>
    <bpmn2:sequenceFlow id="_39AD0037-947E-48C1-B62C-8858E1E1F0C5" sourceRef="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4" targetRef="_A79712AB-C038-4908-80C2-2AB8C0949AB8">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_C408368A-DB0B-4BB3-8B22-56F146574F9F" sourceRef="_6CDF9F6D-EC08-46C4-9D63-F41A2F6A6957" targetRef="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_005724DE-33DC-4D87-B345-8CEC357494E4" sourceRef="_A79712AB-C038-4908-80C2-2AB8C0949AB8" targetRef="_7106845F-C625-417A-A08A-34F51C32BE00">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Qo8TcZOiEeugCOaB_8fVqA" language="http://www.java.com/java"><![CDATA[return KieFunctions.equalsTo(gateway, "IFMS");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_FCA98BCC-B02B-426F-8390-8BB1B7C4582D" sourceRef="_59BF906E-1092-445A-9311-F9D5E68120BA" targetRef="_E4B818D2-6497-4CBF-9622-1949C251C2B9">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_1F6FA13C-CB5E-46ED-8FFC-954FAC36B395" sourceRef="_9E4EE0AC-011D-4232-85C7-E2838AE306C1" targetRef="_59BF906E-1092-445A-9311-F9D5E68120BA"/>
    <bpmn2:sequenceFlow id="_895EB98C-2BD4-4018-ADE6-6A887425F8AA" sourceRef="_7106845F-C625-417A-A08A-34F51C32BE00" targetRef="_9E4EE0AC-011D-4232-85C7-E2838AE306C1">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_D68C5708-543C-4280-ABFA-79513C56B8F0" sourceRef="_A79712AB-C038-4908-80C2-2AB8C0949AB8" targetRef="_9E4EE0AC-011D-4232-85C7-E2838AE306C1">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Qo8TcpOiEeugCOaB_8fVqA" language="http://www.java.com/java"><![CDATA[return !(KieFunctions.equalsTo(gateway, "IFMS"));]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:task id="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4" drools:taskName="ExecuteSQL" name="ExecuteSQL">
      <bpmn2:documentation id="_Qo8Tc5OiEeugCOaB_8fVqA"><![CDATA[execute-sql-workitem/index.html]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[ExecuteSQL]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[if(gateway.equals("SBIe"))
{
kcontext.setVariable("query","select amount,exempted,rebate,surcharge,penalty,interest from vahan4.vp_rcpt_cart where pur_cd in (select distinct cast(pur_cd as integer) from vahanpgi.vm_pgi_head_pur_map where pur_cd !~ '[^0-9]' and state_cd='"+statecode+"' and payment_gateway='"+gateway+"' and nic_merchant_cd='"+mercentcode+"') and transaction_no='"+transactionno+"'");
System.out.println("query"+"select amount,exempted,rebate,surcharge,penalty,interest from vahan4.vp_rcpt_cart where pur_cd in (select distinct cast(pur_cd as integer) from vahanpgi.vm_pgi_head_pur_map where pur_cd !~ '[^0-9]' and state_cd='"+statecode+"' and payment_gateway='"+gateway+"' and nic_merchant_cd='"+mercentcode+"') and transaction_no='"+transactionno+"'");
System.out.println("query"+query);
merchent.setStatecode(statecode);
merchent.setGateway(gateway);
merchent.setMerchentcode(mercentcode);
merchent.setTransactionno(transactionno);
}else if(gateway.equals("ECHALLAN")){
merchent.setStatecode(statecode);
merchent.setGateway(gateway);
merchent.setMerchentcode(mercentcode);
merchent.setTransactionno(transactionno);


kcontext.setVariable("query","select vtr.*,vcart.amount,vcart.tax1,vcart.tax2 from (SELECT owner_name,c_add1,c_add2,c_add3,c_district,c_pincode,c_state, mobile_no,va_owner_identification.appl_no FROM vahan4.va_owner INNER JOIN vahan4.va_owner_identification ON vahan4.va_owner.appl_no = vahan4.va_owner_identification.appl_no) as vtr INNER JOIN(select  amount,appl_no,tax1,tax2 from vahan4.vp_rcpt_cart where pur_cd in (select distinct cast(pur_cd as bigint) from vahanpgi.vm_pgi_head_pur_map where pur_cd !~ '[^0-9]' and state_cd='"+statecode+"' and payment_gateway='"+gateway+"' and nic_merchant_cd='"+mercentcode+"') and transaction_no='"+transactionno+"') as vcart ON vtr.appl_no =vcart.appl_no");

System.out.println("query"+"select vtr.*,vcart.amount,vcart.tax1,vcart.tax2 from (SELECT owner_name,c_add1,c_add2,c_add3,c_district,c_pincode,c_state, mobile_no,va_owner_identification.appl_no FROM vahan4.va_owner INNER JOIN vahan4.va_owner_identification ON vahan4.va_owner.appl_no = vahan4.va_owner_identification.appl_no) as vtr INNER JOIN(select  amount,appl_no,tax1,tax2 from vahan4.vp_rcpt_cart where pur_cd in (select distinct cast(pur_cd as bigint) from vahanpgi.vm_pgi_head_pur_map where pur_cd !~ '[^0-9]' and state_cd='"+statecode+"' and payment_gateway='"+gateway+"' and nic_merchant_cd='"+mercentcode+"') and transaction_no='"+transactionno+"') as vcart ON vtr.appl_no =vcart.appl_no");
System.out.println("query"+query);

}else if(gateway.equals("IFMS")){
merchent.setStatecode(statecode);
merchent.setGateway(gateway);
merchent.setMerchentcode(mercentcode);
merchent.setTransactionno(transactionno);
System.out.println("mercentcode..."+mercentcode);
if(mercentcode!=null && mercentcode!="")
{
    System.out.println("IF IFMS");
kcontext.setVariable("query","SELECT A.PAYMENT_ID,A.PUR_CD,A.PENALTY,A.AMOUNT,A.STATE_CD,A.owner_name,TO_CHAR(COALESCE(A.FROM_DT,CURRENT_DATE),'YYYY/MM/DD') AS PERIOD_FROM, TO_CHAR(COALESCE(A.UPTO_DT,CURRENT_DATE),'YYYY/MM/DD') AS PERIOD_UPTO,COALESCE(A.MOBILE_NO,'9999999') AS MOBILE_NO,A.REGN_NO,C.TOTAL,'5' AS OFF_CD,A.TAX_MODE,A.TAX1,A.TAX2,A.SURCHARGE, CASE WHEN owner.EMAIL_ID IS NULL OR owner.EMAIL_ID='' THEN 'NOEMAIL' ELSE owner.EMAIL_ID END EMAIL_ID, to_char(CURRENT_DATE,'DD/MM/YYYY') AS CURRENT_DATE,t.depart_share,t.vendor_share,case when o.vh_class<=50 then 2 else 1 end as class_type,case when O.owner_cd between 4 and 6 then 1 else 2 end as owner_cd, case when(TC.user_name='TRADEFEE') then 'Trade_Certificate' else 'NA' end as istradeCertificate,  case when E.transport_catg is null or E.transport_catg = '' then 'O' else E.transport_catg end as transport_catg  FROM ONLINESCHEMA.VP_ONLINETAXPGI A  left outer join VAHAN4.TM_PAYMENT_SHARE T on T.STATE_CD = A.STATE_CD and a.pur_Cd=t.pur_Cd LEFT JOIN (SELECT SUM(AMOUNT+PENALTY+TAX1+TAX2+SURCHARGE) AS TOTAL, PAYMENT_ID FROM ONLINESCHEMA.VP_ONLINETAXPGI WHERE PAYMENT_ID='"+transactionno+"' GROUP BY PAYMENT_ID) C ON A.PAYMENT_ID=C.PAYMENT_ID  LEFT JOIN VAHAN4.VT_OWNER_IDENTIFICATION owner on owner.regn_no=a.regn_no AND A.STATE_CD=OWNER.STATE_CD AND OWNER.OFF_CD=5 LEFT JOIN VAHAN4.VT_OWNER O on  O.regn_no = owner.regn_no and a.state_cd=o.state_cd and o.status in('A','Y') left outer join VAHAN4.VM_VH_CLASS E on O.vh_class = E.vh_class  left outer join ONLINESCHEMA.VT_TEMP_APPL_TRANSACTION TC on TC.transaction_no=C.payment_id  and A.pur_cd=TC.pur_cd and A.regn_no=TC.regn_no  WHERE A.PAYMENT_ID = '"+transactionno+"'");
}
else {
   System.out.println("ELSE IFMS"); 
kcontext.setVariable("query","select distinct ct.transaction_no as pay_id,ct.appl_no as appl_no,ct.pur_cd,to_char(COALESCE(ct.period_from,CURRENT_DATE),'YYYY/MM/DD') AS period_from, to_char(COALESCE(ct.period_upto,CURRENT_DATE), 'YYYY/MM/DD') as period_upto,ct.penalty, (ct.amount+ct.interest+ct.prv_adjustment-ct.exempted-ct.rebate) as amt ,ct.surcharge as surcharge, ct.period_mode as tax_mode,  ct.period_mode as tax_mode ,CT.state_cd,COALESCE(o.regn_no,E.REGN_NO,bt.REGN_NO) AS REGN_NO,COALESCE(o.chasi_no,E.CHASI_NO,bt.CHASI_NO) AS CHASI_NO,COALESCE(o.owner_name,E.OWNER_NAME,bt.OWNER_NAME) AS OWNER_NAME,CT.off_cd,case when (va.appl_no is not null) then 'Trade_Certificate' else 'NA' end as istradeCertificate,COALESCE(COALESCE(oi.mobile_no,F.MOBILE_NO),F1.MOBILE_NO) AS MOBILE_NO,COALESCE(COALESCE(oi.email_id,F.EMAIL_ID),F1.EMAIL_ID) AS EMAIL_ID,TOTAL.GRAND_TOTAL,to_char(CURRENT_DATE,'DD/MM/YYYY') AS CURRENT_DATE,t.depart_share,t.vendor_share,COALESCE(c.class_type,'1') as class_type,COALESCE(ct.tax1,0) as tax1,COALESCE(ct.tax2,0) as tax2  ,case when c.transport_catg is null or c.transport_catg = '' then 'O' else c.transport_catg end as transport_catg  from VAHAN4.VP_RCPT_CART ct  left outer join VAHAN4.VA_OWNER o on ct.appl_no = o.appl_no  left outer join VAHAN4.VA_OWNER_IDENTIFICATION  oi on oi.appl_no = ct.appl_no  left outer join (select distinct p.appl_no,p1.regn_no,p.state_cd from VAHAN4.VP_RCPT_CART p left outer join VAHAN4.VA_DETAILS p1 on p.appl_no=p1.appl_no where p.transaction_no='"+transactionno+"' limit 1) D on ct.appl_no = D.appl_no AND D.REGN_NO LIKE 'OR%' and d.state_cd='OR'  left outer join VAHAN4.VT_OWNER E on D.REGN_no = E.REGN_no and d.state_cd=e.state_Cd and e.status in('A','Y')  left outer join VAHAN4.VP_ONLINE_PAY_BALANCE_FEE_DETAILS  bt on ct.appl_no=bt.appl_no   left outer join VAHAN4.VT_OWNER_IDENTIFICATION F on E.REGN_no = F.REGN_no and F.STATE_CD=E.STATE_CD left outer join VAHAN4.VT_OWNER_IDENTIFICATION F1 on  bt.REGN_no = F1.REGN_no and F1.STATE_CD=BT.STATE_CD left outer join VAHAN4.TM_PAYMENT_SHARE  t on t.state_cd = CT.state_cd and ct.pur_cd=t.pur_cd  left outer join VAHAN4.VM_VH_CLASS c on c.vh_class = o.vh_class  left outer join VAHAN4.VA_TRADE_CERTIFICATE VA ON VA.appl_no=ct.appl_no  INNER JOIN (SELECT SUM(AMOUNT+SURCHARGE+PENALTY+INTEREST+TAX1+TAX2+prv_adjustment-EXEMPTED-REBATE) AS GRAND_TOTAL,TRANSACTION_NO FROM VAHAN4.VP_RCPT_CART  WHERE TRANSACTION_NO ='"+transactionno+"' GROUP BY TRANSACTION_NO) TOTAL ON CT.TRANSACTION_NO=TOTAL.TRANSACTION_NO  where ct.user_cd = 1609000220 and ct.transaction_no ='"+transactionno+"'  order by 2,3");

}
System.out.println("query IFMS"+"SELECT A.PAYMENT_ID,A.PUR_CD,A.PENALTY,A.AMOUNT,A.STATE_CD,A.owner_name,TO_CHAR(COALESCE(A.FROM_DT,CURRENT_DATE),'YYYY/MM/DD') AS PERIOD_FROM, TO_CHAR(COALESCE(A.UPTO_DT,CURRENT_DATE),'YYYY/MM/DD') AS PERIOD_UPTO,COALESCE(A.MOBILE_NO,'9999999') AS MOBILE_NO,A.REGN_NO,C.TOTAL,'5' AS OFF_CD,A.TAX_MODE,A.TAX1,A.TAX2,A.SURCHARGE, CASE WHEN owner.EMAIL_ID IS NULL OR owner.EMAIL_ID='' THEN 'NOEMAIL' ELSE owner.EMAIL_ID END EMAIL_ID, to_char(CURRENT_DATE,'DD/MM/YYYY') AS CURRENT_DATE,t.depart_share,t.vendor_share,case when o.vh_class<=50 then 2 else 1 end as class_type,case when O.owner_cd between 4 and 6 then 1 else 2 end as owner_cd, case when(TC.user_name='TRADEFEE') then 'Trade_Certificate' else 'NA' end as istradeCertificate,  case when E.transport_catg is null or E.transport_catg = '' then 'O' else E.transport_catg end as transport_catg  FROM ONLINESCHEMA.VP_ONLINETAXPGI A  left outer join VAHAN4.TM_PAYMENT_SHARE T on T.STATE_CD = A.STATE_CD and a.pur_Cd=t.pur_Cd LEFT JOIN (SELECT SUM(AMOUNT+PENALTY+TAX1+TAX2+SURCHARGE) AS TOTAL, PAYMENT_ID FROM ONLINESCHEMA.VP_ONLINETAXPGI WHERE PAYMENT_ID='"+transactionno+"' GROUP BY PAYMENT_ID) C ON A.PAYMENT_ID=C.PAYMENT_ID  LEFT JOIN VAHAN4.VT_OWNER_IDENTIFICATION owner on owner.regn_no=a.regn_no AND A.STATE_CD=OWNER.STATE_CD AND OWNER.OFF_CD=5 LEFT JOIN VAHAN4.VT_OWNER O on  O.regn_no = owner.regn_no and a.state_cd=o.state_cd and o.status in('A','Y') left outer join VAHAN4.VM_VH_CLASS E on O.vh_class = E.vh_class  left outer join ONLINESCHEMA.VT_TEMP_APPL_TRANSACTION TC on TC.transaction_no=C.payment_id  and A.pur_cd=TC.pur_cd and A.regn_no=TC.regn_no  WHERE A.PAYMENT_ID = '"+transactionno+"'");

 System.out.println("query"+query);



}]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println(result.get(0));
String response=result.get(0).toString();
String details[]=response.split(",");
if(gateway.equals("SBIe"))
{
    System.out.println("IF..SBIE");
kcontext.setVariable("amount",details[0].toString());
kcontext.setVariable("exempted",details[1].toString());
kcontext.setVariable("rebate",details[2].toString());
kcontext.setVariable("surcharge",details[3].toString());
kcontext.setVariable("penality",details[4].toString());
kcontext.setVariable("interest",details[5].toString());
}else if(gateway.equals("ECHALLAN"))
{
     System.out.println("ELSE..ECHALLAN");
merchent.setPartyName(details[0].toString());
merchent.setPartyAddress(details[1].toString()+" "+details[2].toString()+" "+details[3].toString()+" "+details[4].toString()+" "+details[6].toString());
merchent.setPartyPin(details[5].toString());
merchent.setMobileNo(details[7].toString());
merchent.setPartyRef(details[8].toString());
merchent.setAmount1(Integer.parseInt(details[9]));
merchent.setAmount2(Integer.parseInt(details[10]));


}else if(gateway.equals("IFMS"))
{
    if(mercentcode!=null && mercentcode!="")
{
 System.out.println(" IF IFMS");
 merchent.setMerchantOrderNo(details[9].toString());
 merchent.setPostingAmount(Integer.parseInt(details[10]));
}else{
System.out.println(" ELSE IFMS");
 merchent.setApplno(details[1].toString());
 merchent.setPostingAmount(Integer.parseInt(details[18]));

}
}
//System.out.println("amoun1 1.."+userdata.getAmount1());
System.out.println("length.."+details.length);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_C408368A-DB0B-4BB3-8B22-56F146574F9F</bpmn2:incoming>
      <bpmn2:outgoing>_39AD0037-947E-48C1-B62C-8858E1E1F0C5</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Qo8TdJOiEeugCOaB_8fVqA">
        <bpmn2:dataInput id="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ColumnSeparatorInputX" drools:dtype="String" itemSubjectRef="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ColumnSeparatorInputXItem" name="ColumnSeparator"/>
        <bpmn2:dataInput id="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_MaxResultsInputX" drools:dtype="String" itemSubjectRef="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_MaxResultsInputXItem" name="MaxResults"/>
        <bpmn2:dataInput id="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_SQLStatementInputX" drools:dtype="String" itemSubjectRef="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_SQLStatementInputXItem" name="SQLStatement"/>
        <bpmn2:dataInput id="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ResultOutputX" drools:dtype="String" itemSubjectRef="__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ResultOutputXItem" name="Result"/>
        <bpmn2:inputSet id="_Qo8TdZOiEeugCOaB_8fVqA">
          <bpmn2:dataInputRefs>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ColumnSeparatorInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_MaxResultsInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_SQLStatementInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Qo8TdpOiEeugCOaB_8fVqA">
          <bpmn2:dataOutputRefs>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ResultOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Qo8Td5OiEeugCOaB_8fVqA">
        <bpmn2:targetRef>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ColumnSeparatorInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qo8TeJOiEeugCOaB_8fVqA">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qo8TeZOiEeugCOaB_8fVqA"><![CDATA[,]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qo8TepOiEeugCOaB_8fVqA">_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ColumnSeparatorInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qo8Te5OiEeugCOaB_8fVqA">
        <bpmn2:targetRef>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_MaxResultsInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qo86gJOiEeugCOaB_8fVqA">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qo86gZOiEeugCOaB_8fVqA"><![CDATA[3]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qo86gpOiEeugCOaB_8fVqA">_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_MaxResultsInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qo86g5OiEeugCOaB_8fVqA">
        <bpmn2:sourceRef>query</bpmn2:sourceRef>
        <bpmn2:targetRef>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_SQLStatementInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qo86hJOiEeugCOaB_8fVqA">
        <bpmn2:targetRef>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qo86hZOiEeugCOaB_8fVqA">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qo86hpOiEeugCOaB_8fVqA"><![CDATA[ExecuteSQL]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qo86h5OiEeugCOaB_8fVqA">_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Qo86iJOiEeugCOaB_8fVqA">
        <bpmn2:sourceRef>_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_ResultOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>result</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:businessRuleTask id="_59BF906E-1092-445A-9311-F9D5E68120BA" drools:ruleFlowGroup="paymentgatewayrule" name="Gatewayrule" implementation="http://www.jboss.org/drools/rule">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Gatewayrule]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[
if(gateway.equals("SBIe")){
    //System.out.println("amount"+kcontext.getVariable("amount"));
//System.out.println("exempted"+kcontext.getVariable("exempted"));
//System.out.println("rebate"+kcontext.getVariable("rebate"));
//System.out.println("surcharge"+kcontext.getVariable("surcharge"));
//System.out.println("penality"+kcontext.getVariable("penality"));
//System.out.println("interest"+kcontext.getVariable("interest"));
merchent.setPostingAmount(Integer.parseInt((kcontext.getVariable("amount")).toString()));
}
if(gateway.equals("ECHALLAN")){
System.out.println("amount"+merchent.getAmount1());
System.out.println("amount2"+merchent.getAmount2());
System.out.println("name"+merchent.getPartyName());

System.out.println("address"+merchent.getPartyAddress());
System.out.println("p pin"+merchent.getPartyPin());
System.out.println("mob no"+merchent.getMobileNo());

System.out.println("gateway"+merchent.getGateway());
System.out.println("scode"+merchent.getStatecode());
System.out.println("mcode"+merchent.getMerchentcode());
System.out.println("transno"+merchent.getTransactionno());


//System.out.println("exempted"+kcontext.getVariable("exempted"));
//System.out.println("rebate"+kcontext.getVariable("rebate"));
//System.out.println("surcharge"+kcontext.getVariable("surcharge"));
//System.out.println("penality"+kcontext.getVariable("penality"));
//System.out.println("interest"+kcontext.getVariable("interest"));
//merchent.setPostingAmount(Integer.parseInt((kcontext.getVariable("amount")).toString()));
}
]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[if(gateway.equals("SBIe")){
kcontext.setVariable("gatewaystring",merchent.getReqParam());
System.out.println("pay gateway string.."+kcontext.getVariable("gatewaystring"));
}
if(gateway.equals("ECHALLAN")){
   System.out.println("gateway"+merchent.getGateway());
System.out.println("scode"+merchent.getStatecode());
System.out.println("mcode"+merchent.getMerchentcode());
System.out.println("transno"+merchent.getTransactionno());

   System.out.println("ECH.."+merchent.getReqParam()); 
kcontext.setVariable("gatewaystring",merchent.getReqParam());
System.out.println("pay gateway string.."+kcontext.getVariable("gatewaystring"));
}
if(gateway.equals("IFMS"))
{
 System.out.println("ECH.."+merchent.getReqParam()); 
kcontext.setVariable("gatewaystring",merchent.getReqParam());
System.out.println("pay gateway string.."+kcontext.getVariable("gatewaystring"));

}]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_1F6FA13C-CB5E-46ED-8FFC-954FAC36B395</bpmn2:incoming>
      <bpmn2:outgoing>_FCA98BCC-B02B-426F-8390-8BB1B7C4582D</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Qo86iZOiEeugCOaB_8fVqA">
        <bpmn2:dataInput id="_59BF906E-1092-445A-9311-F9D5E68120BA_merchentInputX" drools:dtype="com.nic.paymentgateway.Merchent" itemSubjectRef="__59BF906E-1092-445A-9311-F9D5E68120BA_merchentInputXItem" name="merchent"/>
        <bpmn2:dataOutput id="_59BF906E-1092-445A-9311-F9D5E68120BA_merchentOutputX" drools:dtype="com.nic.paymentgateway.Merchent" itemSubjectRef="__59BF906E-1092-445A-9311-F9D5E68120BA_merchentOutputXItem" name="merchent"/>
        <bpmn2:inputSet id="_Qo86ipOiEeugCOaB_8fVqA">
          <bpmn2:dataInputRefs>_59BF906E-1092-445A-9311-F9D5E68120BA_merchentInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Qo86i5OiEeugCOaB_8fVqA">
          <bpmn2:dataOutputRefs>_59BF906E-1092-445A-9311-F9D5E68120BA_merchentOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Qo86jJOiEeugCOaB_8fVqA">
        <bpmn2:sourceRef>merchent</bpmn2:sourceRef>
        <bpmn2:targetRef>_59BF906E-1092-445A-9311-F9D5E68120BA_merchentInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Qo86jZOiEeugCOaB_8fVqA">
        <bpmn2:sourceRef>_59BF906E-1092-445A-9311-F9D5E68120BA_merchentOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>merchent</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:businessRuleTask>
    <bpmn2:exclusiveGateway id="_A79712AB-C038-4908-80C2-2AB8C0949AB8" gatewayDirection="Diverging">
      <bpmn2:incoming>_39AD0037-947E-48C1-B62C-8858E1E1F0C5</bpmn2:incoming>
      <bpmn2:outgoing>_D68C5708-543C-4280-ABFA-79513C56B8F0</bpmn2:outgoing>
      <bpmn2:outgoing>_005724DE-33DC-4D87-B345-8CEC357494E4</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:startEvent id="_6CDF9F6D-EC08-46C4-9D63-F41A2F6A6957">
      <bpmn2:outgoing>_C408368A-DB0B-4BB3-8B22-56F146574F9F</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:task id="_7106845F-C625-417A-A08A-34F51C32BE00" drools:taskName="ExecuteSQL" name="ExecuteSQL">
      <bpmn2:documentation id="_Qo86jpOiEeugCOaB_8fVqA"><![CDATA[execute-sql-workitem/index.html]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[ExecuteSQL]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[if(gateway.equals("IFMS"))
{
  if(mercentcode!=null && mercentcode!="")
{

kcontext.setVariable("query","SELECT MAP.DISTRICT_CD AS DTO_CD,MAP.OFF_CD AS STO_CD,COALESCE(MAP.DDO_CD,MAP.LOCATION_CD) AS DDO_CD,MAP.DISTRICT_CD||MAP.OFFICE_CD||MAP.LOCATION_CD AS OFFICE_NAME,regexp_replace(OWNER.OWNER_NAME, '[^a-zA-Z0-9]+', ' ','g') AS OWNER_NAME, COALESCE(D.DESCR,'NA') AS CITY_NAME, COALESCE(OWNER.C_ADD1,'')||','||COALESCE(OWNER.C_ADD2,'')||','||COALESCE(OWNER.C_ADD3,'') AS ADDRESS, (TO_CHAR(OWNER.REGN_DT,'YY')::NUMERIC)-1||TO_CHAR(OWNER.REGN_DT,'YY') AS CHALLAN_YEAR,COALESCE(OWNER.P_PINCODE,'123456') AS PIN_CODE, CASE WHEN F.EMAIL_ID IS NULL OR F.EMAIL_ID='' OR F.EMAIL_ID='NA' OR F.EMAIL_ID='0' THEN 'NOEMAIL@abc.com' ELSE F.EMAIL_ID END EMAIL_ID,COALESCE(F.MOBILE_NO,'999999999') as MOBILE_NO,MAP.DEPT_CD,MAP.TREASURY_CD AS TRS_CD,COALESCE(MAP.IFSC_CD,'')||'-'||COALESCE(MAP.BANK_ACC_NO,'') AS BANK  FROM VAHAN4.VT_OWNER OWNER  LEFT JOIN VAHANPGI.VM_PGI_TREASURY MAP ON OWNER.STATE_CD=MAP.STATE_CD AND OWNER.OFF_CD=MAP.OFF_CD AND MAP.NIC_MERCHANT_CD= '"+mercentcode+"'  LEFT JOIN VAHAN4.TM_DISTRICT D ON OWNER.C_DISTRICT=D.DIST_CD  LEFT JOIN VAHAN4.TM_OFFICE E ON OWNER.STATE_CD=E.STATE_CD AND OWNER.OFF_CD=E.OFF_CD  LEFT JOIN ONLINESCHEMA.VT_TEMP_OWNER_IDENTIFICATION F ON OWNER.REGN_NO=F.REGN_NO  WHERE OWNER.REGN_NO='"+merchent.getMerchantOrderNo()+"' and OWNER.status in('A','Y')");
 
}
else{
 kcontext.setVariable("query","SELECT DISTINCT MAP.DISTRICT_CD AS DTO_CD,MAP.OFFICE_CD AS STO_CD,COALESCE(MAP.DDO_CD,MAP.LOCATION_CD) AS DDO_CD,MAP.DISTRICT_CD||MAP.OFFICE_CD||MAP.LOCATION_CD AS OFFICE_NAME,  regexp_replace(COALESCE(OWNER.OWNER_NAME,OWNER1.OWNER_NAME,P2.OWNER_NAME), '[^a-zA-Z0-9]+', ' ','g') AS OWNER_NAME,COALESCE(D.DESCR,'NA') AS CITY_NAME,  COALESCE(OWNER.C_ADD1,OWNER1.C_ADD1,'')||','||COALESCE(OWNER.C_ADD2,OWNER1.C_ADD2,'')||','||COALESCE(OWNER.C_ADD3,OWNER1.C_ADD3,'') AS ADDRESS,  COALESCE((TO_CHAR(OWNER.REGN_DT,'YY')::NUMERIC)-1||TO_CHAR(OWNER.REGN_DT,'YY'),(TO_CHAR(OWNER1.REGN_DT,'YY')::NUMERIC)-1||TO_CHAR(OWNER1.REGN_DT,'YY'),(TO_CHAR(P2.op_dt,'YY')::NUMERIC)-1||TO_CHAR(P2.op_dt,'YY')) AS CHALLAN_YEAR,  COALESCE(OWNER.P_PINCODE,OWNER1.P_PINCODE,'123456') AS PIN_CODE, CASE WHEN F.EMAIL_ID IS NULL OR F.EMAIL_ID='' THEN 'NOEMAIL@abc.com' ELSE F.EMAIL_ID END EMAIL_ID,COALESCE(F.MOBILE_NO,VTF.MOBILE_NO,9999999999) as MOBILE_NO,  MAP.DEPT_CD,MAP.TREASURY_CD AS TRS_CD,COALESCE(MAP.IFSC_CD,'')||'-'||COALESCE(MAP.BANK_ACC_NO,'') AS BANK  FROM  VAHAN4.VP_RCPT_CART VA  LEFT JOIN  VAHAN4.VA_DETAILS DET ON VA.APPL_NO=DET.APPL_NO  LEFT JOIN  VAHANPGI.VM_PGI_TREASURY MAP ON VA.STATE_CD=MAP.STATE_CD AND VA.OFF_CD=MAP.OFF_CD AND MAP.NIC_MERCHANT_CD='VAHAN4'  LEFT JOIN  VAHAN4.VA_OWNER OWNER ON VA.STATE_CD=OWNER.STATE_CD AND VA.APPL_NO=OWNER.APPL_NO AND VA.OFF_CD = OWNER.OFF_CD  LEFT JOIN  VAHAN4.VT_OWNER OWNER1 ON VA.STATE_CD=OWNER1.STATE_CD AND DET.REGN_NO=OWNER1.REGN_NO AND OWNER1.OWNER_SR IN(SELECT MAX(OWNER_SR) FROM  VAHAN4.VT_OWNER VT1  LEFT JOIN  VAHAN4.VA_DETAILS DET1 ON VT1.STATE_CD=DET1.STATE_CD AND DET1.REGN_NO=VT1.REGN_NO WHERE DET1.APPL_NO='"+merchent.getApplno()+"' AND STATUS IN('A','Y'))  LEFT join  VAHAN4.VP_ONLINE_PAY_BALANCE_FEE_DETAILS  p2 on VA.appl_no=p2.appl_no  LEFT JOIN  VAHAN4.VA_OWNER_IDENTIFICATION F ON OWNER.APPL_NO=F.APPL_NO  AND (OWNER.STATE_CD = F.STATE_CD OR OWNER1.STATE_CD  = F.STATE_CD)  LEFT JOIN  VAHAN4.VT_OWNER_IDENTIFICATION VTF ON DET.REGN_NO=VTF.REGN_NO AND (OWNER.STATE_CD = VTF.STATE_CD OR OWNER1.STATE_CD  = VTF.STATE_CD)  LEFT JOIN  VAHAN4.TM_DISTRICT D ON (OWNER.C_DISTRICT=D.DIST_CD or OWNER1.C_DISTRICT=D.DIST_CD) and (OWNER.STATE_CD = D.STATE_CD OR OWNER1.STATE_CD  = D.STATE_CD)  WHERE VA.APPL_NO='"+merchent.getApplno()+"'");
}
System.out.println("SELECT MAP.DISTRICT_CD AS DTO_CD,MAP.OFF_CD AS STO_CD,COALESCE(MAP.DDO_CD,MAP.LOCATION_CD) AS DDO_CD,MAP.DISTRICT_CD||MAP.OFFICE_CD||MAP.LOCATION_CD AS OFFICE_NAME,regexp_replace(OWNER.OWNER_NAME, '[^a-zA-Z0-9]+', ' ','g') AS OWNER_NAME, COALESCE(D.DESCR,'NA') AS CITY_NAME, COALESCE(OWNER.C_ADD1,'')||','||COALESCE(OWNER.C_ADD2,'')||','||COALESCE(OWNER.C_ADD3,'') AS ADDRESS, (TO_CHAR(OWNER.REGN_DT,'YY')::NUMERIC)-1||TO_CHAR(OWNER.REGN_DT,'YY') AS CHALLAN_YEAR,COALESCE(OWNER.P_PINCODE,'123456') AS PIN_CODE, CASE WHEN F.EMAIL_ID IS NULL OR F.EMAIL_ID='' OR F.EMAIL_ID='NA' OR F.EMAIL_ID='0' THEN 'NOEMAIL@abc.com' ELSE F.EMAIL_ID END EMAIL_ID,COALESCE(F.MOBILE_NO,'999999999') as MOBILE_NO,MAP.DEPT_CD,MAP.TREASURY_CD AS TRS_CD,COALESCE(MAP.IFSC_CD,'')||'-'||COALESCE(MAP.BANK_ACC_NO,'') AS BANK  FROM VAHAN4.VT_OWNER OWNER  LEFT JOIN VAHANPGI.VM_PGI_TREASURY MAP ON OWNER.STATE_CD=MAP.STATE_CD AND OWNER.OFF_CD=MAP.OFF_CD AND MAP.NIC_MERCHANT_CD= '"+mercentcode+"'  LEFT JOIN VAHAN4.TM_DISTRICT D ON OWNER.C_DISTRICT=D.DIST_CD  LEFT JOIN VAHAN4.TM_OFFICE E ON OWNER.STATE_CD=E.STATE_CD AND OWNER.OFF_CD=E.OFF_CD  LEFT JOIN ONLINESCHEMA.VT_TEMP_OWNER_IDENTIFICATION F ON OWNER.REGN_NO=F.REGN_NO  WHERE OWNER.REGN_NO='"+merchent.getMerchantOrderNo()+"' and OWNER.status in('A','Y')");

 System.out.println("query"+query);
}]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println(result.get(0));
String response=result.get(0).toString();
String details[]=response.split(",");
 if(mercentcode!=null && mercentcode!="")
{
merchent.setPartyName(details[4].toString());
merchent.setPartyAddress(details[6].toString()+","+details[7].toString()+","+details[8].toString()+","+details[9].toString()+","+details[10].toString());
merchent.setPartyPin(String.valueOf(details[12]));
merchent.setPartyRef(details[13].toString());
merchent.setMobileNo(details[14]);
}
else
{
merchent.setPartyName(details[4].toString());
merchent.setPartyAddress(details[6].toString()+","+details[7].toString()+","+details[8].toString());
merchent.setPartyPin(String.valueOf(details[10]));
merchent.setPartyRef(details[11].toString());
merchent.setMobileNo(details[12]);

}
System.out.println("length.."+details.length);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_005724DE-33DC-4D87-B345-8CEC357494E4</bpmn2:incoming>
      <bpmn2:outgoing>_895EB98C-2BD4-4018-ADE6-6A887425F8AA</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Qo86j5OiEeugCOaB_8fVqA">
        <bpmn2:dataInput id="_7106845F-C625-417A-A08A-34F51C32BE00_ColumnSeparatorInputX" drools:dtype="String" itemSubjectRef="__7106845F-C625-417A-A08A-34F51C32BE00_ColumnSeparatorInputXItem" name="ColumnSeparator"/>
        <bpmn2:dataInput id="_7106845F-C625-417A-A08A-34F51C32BE00_MaxResultsInputX" drools:dtype="String" itemSubjectRef="__7106845F-C625-417A-A08A-34F51C32BE00_MaxResultsInputXItem" name="MaxResults"/>
        <bpmn2:dataInput id="_7106845F-C625-417A-A08A-34F51C32BE00_SQLStatementInputX" drools:dtype="String" itemSubjectRef="__7106845F-C625-417A-A08A-34F51C32BE00_SQLStatementInputXItem" name="SQLStatement"/>
        <bpmn2:dataInput id="_7106845F-C625-417A-A08A-34F51C32BE00_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_7106845F-C625-417A-A08A-34F51C32BE00_ResultOutputX" drools:dtype="String" itemSubjectRef="__7106845F-C625-417A-A08A-34F51C32BE00_ResultOutputXItem" name="Result"/>
        <bpmn2:inputSet id="_Qo86kJOiEeugCOaB_8fVqA">
          <bpmn2:dataInputRefs>_7106845F-C625-417A-A08A-34F51C32BE00_ColumnSeparatorInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7106845F-C625-417A-A08A-34F51C32BE00_MaxResultsInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7106845F-C625-417A-A08A-34F51C32BE00_SQLStatementInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7106845F-C625-417A-A08A-34F51C32BE00_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Qo86kZOiEeugCOaB_8fVqA">
          <bpmn2:dataOutputRefs>_7106845F-C625-417A-A08A-34F51C32BE00_ResultOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Qo86kpOiEeugCOaB_8fVqA">
        <bpmn2:targetRef>_7106845F-C625-417A-A08A-34F51C32BE00_ColumnSeparatorInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qo86k5OiEeugCOaB_8fVqA">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qo86lJOiEeugCOaB_8fVqA"><![CDATA[,]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qo86lZOiEeugCOaB_8fVqA">_7106845F-C625-417A-A08A-34F51C32BE00_ColumnSeparatorInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qo86lpOiEeugCOaB_8fVqA">
        <bpmn2:targetRef>_7106845F-C625-417A-A08A-34F51C32BE00_MaxResultsInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qo86l5OiEeugCOaB_8fVqA">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qo86mJOiEeugCOaB_8fVqA"><![CDATA[3]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qo86mZOiEeugCOaB_8fVqA">_7106845F-C625-417A-A08A-34F51C32BE00_MaxResultsInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qo86mpOiEeugCOaB_8fVqA">
        <bpmn2:sourceRef>query</bpmn2:sourceRef>
        <bpmn2:targetRef>_7106845F-C625-417A-A08A-34F51C32BE00_SQLStatementInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qo86m5OiEeugCOaB_8fVqA">
        <bpmn2:targetRef>_7106845F-C625-417A-A08A-34F51C32BE00_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qo86nJOiEeugCOaB_8fVqA">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qo86nZOiEeugCOaB_8fVqA"><![CDATA[ExecuteSQL]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qo86npOiEeugCOaB_8fVqA">_7106845F-C625-417A-A08A-34F51C32BE00_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Qo86n5OiEeugCOaB_8fVqA">
        <bpmn2:sourceRef>_7106845F-C625-417A-A08A-34F51C32BE00_ResultOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>result</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_E4B818D2-6497-4CBF-9622-1949C251C2B9">
      <bpmn2:incoming>_FCA98BCC-B02B-426F-8390-8BB1B7C4582D</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:exclusiveGateway id="_9E4EE0AC-011D-4232-85C7-E2838AE306C1" gatewayDirection="Converging">
      <bpmn2:incoming>_D68C5708-543C-4280-ABFA-79513C56B8F0</bpmn2:incoming>
      <bpmn2:incoming>_895EB98C-2BD4-4018-ADE6-6A887425F8AA</bpmn2:incoming>
      <bpmn2:outgoing>_1F6FA13C-CB5E-46ED-8FFC-954FAC36B395</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_Qo9hkJOiEeugCOaB_8fVqA">
    <bpmndi:BPMNPlane id="_Qo9hkZOiEeugCOaB_8fVqA" bpmnElement="PaymentGateway.paymentprocess">
      <bpmndi:BPMNShape id="shape__9E4EE0AC-011D-4232-85C7-E2838AE306C1" bpmnElement="_9E4EE0AC-011D-4232-85C7-E2838AE306C1">
        <dc:Bounds height="56.0" width="56.0" x="571.0" y="124.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__E4B818D2-6497-4CBF-9622-1949C251C2B9" bpmnElement="_E4B818D2-6497-4CBF-9622-1949C251C2B9">
        <dc:Bounds height="56.0" width="56.0" x="888.0" y="118.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__7106845F-C625-417A-A08A-34F51C32BE00" bpmnElement="_7106845F-C625-417A-A08A-34F51C32BE00">
        <dc:Bounds height="102.0" width="154.0" x="401.0" y="257.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__6CDF9F6D-EC08-46C4-9D63-F41A2F6A6957" bpmnElement="_6CDF9F6D-EC08-46C4-9D63-F41A2F6A6957">
        <dc:Bounds height="56.0" width="56.0" x="131.0" y="124.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__A79712AB-C038-4908-80C2-2AB8C0949AB8" bpmnElement="_A79712AB-C038-4908-80C2-2AB8C0949AB8">
        <dc:Bounds height="56.0" width="56.0" x="450.0" y="124.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__59BF906E-1092-445A-9311-F9D5E68120BA" bpmnElement="_59BF906E-1092-445A-9311-F9D5E68120BA">
        <dc:Bounds height="102.0" width="154.0" x="678.0" y="95.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4" bpmnElement="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4">
        <dc:Bounds height="102.0" width="154.0" x="240.0" y="101.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__A79712AB-C038-4908-80C2-2AB8C0949AB8_to_shape__9E4EE0AC-011D-4232-85C7-E2838AE306C1" bpmnElement="_D68C5708-543C-4280-ABFA-79513C56B8F0">
        <di:waypoint xsi:type="dc:Point" x="478.0" y="152.0"/>
        <di:waypoint xsi:type="dc:Point" x="571.0" y="152.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__7106845F-C625-417A-A08A-34F51C32BE00_to_shape__9E4EE0AC-011D-4232-85C7-E2838AE306C1" bpmnElement="_895EB98C-2BD4-4018-ADE6-6A887425F8AA">
        <di:waypoint xsi:type="dc:Point" x="478.0" y="308.0"/>
        <di:waypoint xsi:type="dc:Point" x="599.0" y="308.4226"/>
        <di:waypoint xsi:type="dc:Point" x="599.0" y="180.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__9E4EE0AC-011D-4232-85C7-E2838AE306C1_to_shape__59BF906E-1092-445A-9311-F9D5E68120BA" bpmnElement="_1F6FA13C-CB5E-46ED-8FFC-954FAC36B395">
        <di:waypoint xsi:type="dc:Point" x="599.0" y="152.0"/>
        <di:waypoint xsi:type="dc:Point" x="678.0" y="146.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__59BF906E-1092-445A-9311-F9D5E68120BA_to_shape__E4B818D2-6497-4CBF-9622-1949C251C2B9" bpmnElement="_FCA98BCC-B02B-426F-8390-8BB1B7C4582D">
        <di:waypoint xsi:type="dc:Point" x="755.0" y="197.0"/>
        <di:waypoint xsi:type="dc:Point" x="888.0" y="146.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__A79712AB-C038-4908-80C2-2AB8C0949AB8_to_shape__7106845F-C625-417A-A08A-34F51C32BE00" bpmnElement="_005724DE-33DC-4D87-B345-8CEC357494E4">
        <di:waypoint xsi:type="dc:Point" x="478.0" y="152.0"/>
        <di:waypoint xsi:type="dc:Point" x="478.0" y="257.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__6CDF9F6D-EC08-46C4-9D63-F41A2F6A6957_to_shape__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4" bpmnElement="_C408368A-DB0B-4BB3-8B22-56F146574F9F">
        <di:waypoint xsi:type="dc:Point" x="159.0" y="152.0"/>
        <di:waypoint xsi:type="dc:Point" x="240.0" y="152.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4_to_shape__A79712AB-C038-4908-80C2-2AB8C0949AB8" bpmnElement="_39AD0037-947E-48C1-B62C-8858E1E1F0C5">
        <di:waypoint xsi:type="dc:Point" x="394.0" y="152.0"/>
        <di:waypoint xsi:type="dc:Point" x="478.0" y="124.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_Qo9hkpOiEeugCOaB_8fVqA" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7106845F-C625-417A-A08A-34F51C32BE00" id="_Qo9hk5OiEeugCOaB_8fVqA">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_6CDF9F6D-EC08-46C4-9D63-F41A2F6A6957" id="_Qo9hlJOiEeugCOaB_8fVqA">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_59BF906E-1092-445A-9311-F9D5E68120BA" id="_Qo9hlZOiEeugCOaB_8fVqA">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1C5E4B17-87F9-476F-BE32-DF8BF7FE19F4" id="_Qo9hlpOiEeugCOaB_8fVqA">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_Qo8TcJOiEeugCOaB_8fVqA</bpmn2:source>
    <bpmn2:target>_Qo8TcJOiEeugCOaB_8fVqA</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
